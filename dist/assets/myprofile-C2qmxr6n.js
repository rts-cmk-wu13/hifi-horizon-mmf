import{r as d,j as e,b as w,c as z,S as I}from"./index-DxO6IQsv.js";import{P as T}from"./ProfileTabs-_mgt7Luc.js";import W from"./Modify-BVWHvOde.js";function x({onClick:i,label:c}){const[p,g]=d.useState(!1);return e.jsx("button",{onClick:i,style:{padding:"10px 20px",fontSize:"0.9em",borderRadius:"4px",border:"none",background:p?"#ff6a08":"#f5f5f5",cursor:"pointer",boxShadow:"0 0 10px rgba(0,0,0,0.1)",color:p?"#fff":"#ff6a08",transition:"background 0.2s, color 0.2s",marginRight:"1em"},onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),"aria-label":c||"Modify",title:c||"Modify",children:e.jsx("i",{className:"fa-solid fa-pen"})})}const N={genralDiv:{display:"flex",flexDirection:"column",backgroundColor:"#fff",borderRadius:"8px",width:"78%",marginBottom:"2rem",maxWidth:600,margin:"2rem auto",border:"1px solid #eee",boxShadow:"0 4px 24px #0001",padding:"2em"}};function L(){const[i,c]=d.useState(null),[p,g]=d.useState(""),[h,v]=d.useState(null),[u,r]=d.useState(null),[s,o]=d.useState(""),[t,a]=d.useState(""),[j,C]=d.useState(()=>{const n=localStorage.getItem("user");return n?JSON.parse(n):null}),m=j?j.email:null,S=w();z(),d.useEffect(()=>{if(!m)return;fetch(`undefined/api/profile?email=${encodeURIComponent(m)}`).then(l=>{if(!l.ok)throw new Error("User not found");return l.json()}).then(l=>c(l)).catch(l=>g(l.message))},[m]);const R=()=>{localStorage.removeItem("user"),C(null),S("/login")},f=async(n,l)=>{let y;n==="address"?y={email:i.email,...s}:y={email:i.email,[l]:s};const b=await fetch(`${API_URL}/api/profile`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)}),k=await b.json();b.ok?(a("Updated!"),r(null),c({...i,[l]:s})):a(k.message||"Failed to update.")};return p?e.jsx("div",{children:p}):i?e.jsx(T,{children:e.jsxs("div",{style:N.genralDiv,children:[e.jsxs("div",{style:{marginBottom:"2em",display:"flex",flexDirection:"column",alignItems:"stretch",gap:"0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"1em "},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("i",{className:"fa-solid fa-user profile-icon",style:{fontSize:"2.5rem",marginRight:"20px",color:"#ffcaa7"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:"1.1em"},children:"Name:"}),e.jsx("div",{children:i.fullname}),u==="name"&&e.jsxs("div",{style:{marginTop:8},children:[e.jsx("input",{value:s,onChange:n=>o(n.target.value),style:{padding:8,borderRadius:4,border:"1px solid #ccc"}}),e.jsx("button",{onClick:()=>f("name","fullname"),style:{color:"orange",padding:"1em",border:"none",borderRadius:"4px",background:"#fff",fontWeight:600,marginRight:"0.5em",cursor:"pointer"},children:"Save"}),e.jsx("button",{onClick:()=>r(null),children:"Cancel"}),t&&e.jsx("div",{children:t})]})]})]}),e.jsx(x,{onClick:()=>{r("name"),o(i.fullname),a("")}})]}),e.jsx("hr",{style:{width:"100%",border:"none",borderTop:"1px solid #eee",margin:0}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"1em "},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("i",{className:"fa-solid fa-phone profile-icon",style:{fontSize:"2.5rem",marginRight:"20px",color:"#ffcaa7"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:"1.1em"},children:"Phone number:"}),e.jsx("div",{children:i.phone||e.jsx("span",{style:{color:"#888"},children:"No phone number provided"})}),u==="phone"&&e.jsxs("div",{style:{marginTop:8},children:[e.jsx("input",{value:s,onChange:n=>o(n.target.value),style:{padding:8,borderRadius:4,border:"1px solid #ccc"}}),e.jsx("button",{onClick:()=>f("phone","phone"),style:{color:"orange",padding:"1em",border:"none",borderRadius:"4px",background:"#fff",fontWeight:600,marginRight:"0.5em",cursor:"pointer"},children:"Save"}),e.jsx("button",{onClick:()=>r(null),children:"Cancel"}),t&&e.jsx("div",{children:t})]})]})]}),e.jsx(x,{onClick:()=>{r("phone"),o(i.phone||""),a("")}})]}),e.jsx("hr",{style:{width:"100%",border:"none",borderTop:"1px solid #eee",margin:0}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"1em "},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("i",{className:"fa-solid fa-envelope profile-icon",style:{fontSize:"2.5rem",marginRight:"20px",color:"#ffcaa7"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:"1.1em"},children:"Email:"}),e.jsx("div",{children:i.email}),u==="email"&&e.jsxs("div",{style:{marginTop:8},children:[e.jsx("input",{value:s,onChange:n=>o(n.target.value),style:{padding:8,borderRadius:4,border:"1px solid #ccc"}}),e.jsx("button",{onClick:()=>f("email","email"),style:{color:"orange",padding:"1em",border:"none",borderRadius:"4px",background:"#fff",fontWeight:600,marginRight:"0.5em",cursor:"pointer"},children:"Save"}),e.jsx("button",{onClick:()=>r(null),children:"Cancel"}),t&&e.jsx("div",{children:t})]})]})]}),e.jsx(x,{onClick:()=>{r("email"),o(i.email),a("")}})]}),e.jsx("hr",{style:{width:"100%",border:"none",borderTop:"1px solid #eee",margin:0}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"1em "},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("i",{className:"fa-solid fa-location-dot profile-icon",style:{fontSize:"2.5rem",marginRight:"20px",color:"#ffcaa7"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:"1.1em"},children:"Address:"}),e.jsxs("div",{children:[i.address1,i.zipcode?` ${i.zipcode}`:"",e.jsx("br",{}),i.city?` ${i.city}`:"",e.jsx("br",{}),i.country?` ${i.country}`:""]}),u==="address"&&e.jsxs("div",{style:{marginTop:8,display:"flex",flexDirection:"column",gap:8},children:[e.jsx("input",{placeholder:"Address",value:s.address1,onChange:n=>o({...s,address1:n.target.value}),style:{padding:8,borderRadius:4,border:"1px solid #ccc"}}),e.jsx("input",{placeholder:"Zipcode",value:s.zipcode,onChange:n=>o({...s,zipcode:n.target.value}),style:{padding:8,borderRadius:4,border:"1px solid #ccc"}}),e.jsx("input",{placeholder:"City",value:s.city,onChange:n=>o({...s,city:n.target.value}),style:{padding:8,borderRadius:4,border:"1px solid #ccc"}}),e.jsx("input",{placeholder:"Country",value:s.country,onChange:n=>o({...s,country:n.target.value}),style:{padding:8,borderRadius:4,border:"1px solid #ccc"}}),e.jsx("button",{onClick:()=>f("address",null),style:{color:"orange",padding:"1em",border:"none",borderRadius:"4px",background:"#fff",fontWeight:600,marginRight:"0.5em",cursor:"pointer"},children:"Save"}),e.jsx("button",{onClick:()=>r(null),children:"Cancel"}),t&&e.jsx("div",{children:t})]})]})]}),e.jsx(x,{onClick:()=>{r("address"),o({address1:i.address1||"",zipcode:i.zipcode||"",city:i.city||"",country:i.country||""}),a("")}})]}),e.jsx("hr",{style:{width:"100%",border:"none",borderTop:"1px solid #eee",margin:0}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"1em "},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("i",{className:"fa-solid fa-key profile-icon",style:{fontSize:"2.5rem",marginRight:"20px",color:"#ffcaa7"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:"1.1em"},children:"Password:"}),e.jsx("div",{children:"********"}),u==="password"&&e.jsxs("div",{style:{marginTop:8},children:[e.jsx("input",{type:"password",value:s,onChange:n=>o(n.target.value),style:{padding:8,borderRadius:4,border:"1px solid #ccc"}}),e.jsx("button",{onClick:()=>f("password","password"),style:{color:"orange",padding:"1em",border:"none",borderRadius:"4px",background:"#fff",fontWeight:600,marginRight:"0.5em",cursor:"pointer"},children:"Save"}),e.jsx("button",{onClick:()=>r(null),children:"Cancel"}),t&&e.jsx("div",{children:t})]})]})]}),e.jsx(x,{onClick:()=>{r("password"),o(""),a("")}})]})]}),e.jsx("div",{style:{display:"flex",gap:"1em"},children:e.jsx("button",{onClick:R,style:{padding:"10px 20px",borderRadius:"4px",background:"#FF6900",color:"#fff",border:"none",fontWeight:600,fontSize:"1em",cursor:"pointer"},children:"Logout"})}),h&&e.jsx(W,{field:h.field,value:h.value,onClose:()=>v(null),email:i.email})]})}):e.jsx(I,{})}export{L as default};
