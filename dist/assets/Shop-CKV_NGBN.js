import{G as v,r as i,j as e,a as N,u as L,b as S,c as P,L as $}from"./index-Bs8CB3Fj.js";function E(l){return v({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"4",y1:"21",x2:"4",y2:"14"},child:[]},{tag:"line",attr:{x1:"4",y1:"10",x2:"4",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"20",y1:"21",x2:"20",y2:"16"},child:[]},{tag:"line",attr:{x1:"20",y1:"12",x2:"20",y2:"3"},child:[]},{tag:"line",attr:{x1:"1",y1:"14",x2:"7",y2:"14"},child:[]},{tag:"line",attr:{x1:"9",y1:"8",x2:"15",y2:"8"},child:[]},{tag:"line",attr:{x1:"17",y1:"16",x2:"23",y2:"16"},child:[]}]})(l)}const A="/assets/product_1-DXK-jjVL.svg";function y(l){return v({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 15.0006L7.75732 10.758L9.17154 9.34375L12 12.1722L14.8284 9.34375L16.2426 10.758L12 15.0006Z"},child:[]}]})(l)}function D({selectedBrand:l,onBrandChange:c,selectedCategory:d,onCategoryChange:x}){const[o,w]=i.useState({brand:!0,category:!0,color:!0,price:!0}),r=t=>w(h=>({...h,[t]:!h[t]})),u=["BÃ¶sendorfer","Creek","Epos","Exposure","Harbeth","Manley","Parasound","Pro-Ject"],m=["CD Players","DVD Players","Amplifiers","Speakers","Turntables"],j=t=>t==null?void 0:t.toLowerCase().trim(),n=t=>t==null?void 0:t.toLowerCase().replace(/\s+/g,"-").trim();return e.jsxs("aside",{className:"w-1/5 p-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"header__dropdown flex justify-between items-center cursor-pointer",onClick:()=>r("brand"),children:[e.jsx("h3",{children:"Brand"}),e.jsx(y,{className:`text-5xl transition-transform dropdown__icon ${o.brand?"rotate-180":""}`})]}),o.brand&&e.jsxs("div",{className:"mt-2 space-y-2",children:[u.map(t=>e.jsxs("div",{className:"filters_text",children:[e.jsx("input",{type:"radio",className:"option-input radio ml-2",name:"brand",value:j(t),checked:l===j(t),onChange:()=>c(j(t))}),e.jsx("label",{className:"mb-0 mr-2 capitalize",children:t})]},t)),e.jsxs("div",{className:"filters_text",children:[e.jsx("input",{type:"radio",className:"option-input radio ml-2",name:"brand",value:"",checked:!l,onChange:()=>c("")}),e.jsx("label",{className:"mb-0 mr-2",children:"All Brands"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"header__dropdown flex justify-between items-center cursor-pointer",onClick:()=>r("category"),children:[e.jsx("h3",{children:"Category"}),e.jsx(y,{className:`text-5xl transition-transform dropdown__icon ${o.category?"rotate-180":""}`})]}),o.category&&e.jsxs("div",{className:"mt-2 space-y-2",children:[m.map(t=>e.jsxs("div",{className:"filters_text",children:[e.jsx("input",{type:"radio",className:"option-input radio ml-2",name:"category",value:n(t),checked:d===n(t),onChange:()=>x(n(t))}),e.jsx("label",{className:"mb-0 mr-2 capitalize",children:t})]},t)),e.jsxs("div",{className:"filters_text",children:[e.jsx("input",{type:"radio",className:"option-input radio ml-2",name:"category",value:"",checked:!d,onChange:()=>x("")}),e.jsx("label",{className:"mb-0 mr-2",children:"All Categories"})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"header__dropdown flex justify-between items-center cursor-pointer",onClick:()=>r("color"),children:[e.jsx("h3",{children:"Color"}),e.jsx(y,{className:`text-5xl transition-transform dropdown__icon ${o.color?"rotate-180":""}`})]}),o.color&&e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsxs("div",{className:"flex flex-row-reverse items-center justify-between gap-2",children:[e.jsx("input",{type:"radio",className:"option-input radio ml-2",name:"color"}),e.jsxs("label",{className:"mb-0 mr-2 flex items-center justify-between",children:[e.jsx(N,{className:"text-white text-3xl"}),"White"]})]}),e.jsxs("div",{className:"flex flex-row-reverse items-center justify-between gap-2",children:[e.jsx("input",{type:"radio",className:"option-input radio ml-2",name:"color"}),e.jsxs("label",{className:"mb-0 mr-2",children:[e.jsx(N,{className:"text-black text-3xl"}),"Black"]})]}),e.jsxs("div",{className:"flex flex-row-reverse items-center justify-between gap-2",children:[e.jsx("input",{type:"radio",className:"option-input radio ml-2"}),e.jsxs("label",{className:"mb-0 mr-2",children:[e.jsx(N,{className:"text-gray-500 text-3xl"}),"Grey"]})]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"header__dropdown flex justify-between items-center cursor-pointer",onClick:()=>r("price"),children:[e.jsx("h3",{children:"Price"}),e.jsx(y,{className:`text-5xl transition-transform dropdown__icon ${o.price?"rotate-180":""}`})]})})]})}function U(){const[l,c]=i.useState([]),[d,x]=i.useState(!0),[o,w]=i.useState(null);i.useRef(null);const{brand:r}=L(),u=S(),m=P(),n=new URLSearchParams(m.search).get("category");i.useEffect(()=>{x(!0),fetch("http://localhost:4000/products").then(s=>s.json()).then(s=>{s.results?c(s.results):Array.isArray(s)?c(s):console.error("Unknown data format:",s)}).catch(s=>{console.error("Error fetching products:",s)}).finally(()=>{x(!1)})},[]);const t=s=>s==null?void 0:s.toLowerCase().trim(),h=s=>s==null?void 0:s.toLowerCase().replace(/\s+/g,"-").trim(),b=d?[]:l.filter(s=>{const a=r?t(s.brand)===t(r):!0,f=n?h(s.category)===h(n):!0;return a&&f}),C=s=>{const a=s?`/shop/${s.toLowerCase()}${m.search}`:`/shop${m.search}`;u(a)},_=s=>{let a="/shop";r&&(a+=`/${r}`);const f=s?`?category=${s}`:"";u(`${a}${f}`)},k=s=>{try{const a=JSON.parse(localStorage.getItem("cart"))||[];if(a.find(p=>p.id===s.id)){const p=a.map(g=>g.id===s.id?{...g,quantity:g.quantity+1}:g);localStorage.setItem("cart",JSON.stringify(p))}else{const p=[...a,{...s,quantity:1}];localStorage.setItem("cart",JSON.stringify(p))}alert(`${s.product_name} has been added to the cart.`),window.dispatchEvent(new Event("cartUpdated"))}catch(a){console.error("Error saving to cart:",a)}};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"uppercase text-2xl font-bold mb-4",children:"Products"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(D,{selectedBrand:r,onBrandChange:C,selectedCategory:n,onCategoryChange:_}),e.jsx("section",{className:"w-4/5 p-4 grid grid-cols-3 gap-4",children:d?e.jsx("p",{children:"Loading products..."}):b.length===0?e.jsxs("p",{children:["No products found",n&&` in category: ${n}`,r&&` for brand: ${r}`]}):b.map((s,a)=>e.jsxs("div",{className:"bg-white p-4 rounded shadow flex flex-col items-center justify-between",children:[e.jsxs("h3",{className:"mr-2 flex",children:["Compare ",e.jsx(E,{})]}),e.jsx($,{to:`/shop/product/${s.id}`,children:e.jsx("img",{src:s.image_url||A,alt:s.product_name,className:"my-2"})}),e.jsx("h3",{className:"text-center",children:s.product_name}),e.jsxs("p",{className:"font-bold mt-2",children:[s.price_dkk," DKK"]}),e.jsxs("div",{className:"flex items-center justify-between gap-4 mt-2 w-full",children:[e.jsx("button",{className:"product__bttn bg-orange-600 text-white px-4 py-2 rounded shadow hover:bg-orange-700",onClick:()=>k(s),children:"Add to cart"}),e.jsxs("p",{className:"flex items-center",children:[s.stock||"In stock",e.jsx("span",{className:`ml-1 text-xl ${s.stock==="Out of stock"?"text-red-600":s.stock==="Few in stock"?"text-orange-500":"text-green-600"}`,children:e.jsx(N,{})})]})]})]},a))})]})]})}export{U as default};
