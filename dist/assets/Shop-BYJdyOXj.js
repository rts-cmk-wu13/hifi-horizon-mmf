import{G as b,r as l,j as e,a as j,u as _,b as L,c as S,L as $}from"./index-C9JMSumX.js";function P(n){return b({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"4",y1:"21",x2:"4",y2:"14"},child:[]},{tag:"line",attr:{x1:"4",y1:"10",x2:"4",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"20",y1:"21",x2:"20",y2:"16"},child:[]},{tag:"line",attr:{x1:"20",y1:"12",x2:"20",y2:"3"},child:[]},{tag:"line",attr:{x1:"1",y1:"14",x2:"7",y2:"14"},child:[]},{tag:"line",attr:{x1:"9",y1:"8",x2:"15",y2:"8"},child:[]},{tag:"line",attr:{x1:"17",y1:"16",x2:"23",y2:"16"},child:[]}]})(n)}const E="/assets/product_1-DXK-jjVL.svg";function f(n){return b({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 15.0006L7.75732 10.758L9.17154 9.34375L12 12.1722L14.8284 9.34375L16.2426 10.758L12 15.0006Z"},child:[]}]})(n)}function A({selectedBrand:n,onBrandChange:i}){const[o,m]=l.useState({brand:!0,color:!0,price:!0}),h=r=>m(c=>({...c,[r]:!c[r]})),g=["BÃ¶sendorfer","Creek","Epos","Exposure","Harbeth","Manley","Parasound","Pro-Ject"],a=r=>r.toLowerCase();return e.jsxs("aside",{className:"w-1/5 p-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"header__dropdown flex justify-between items-center cursor-pointer",onClick:()=>h("brand"),children:[e.jsx("h3",{children:"Brand"}),e.jsx(f,{className:`text-5xl transition-transform dropdown__icon ${o.brand?"rotate-180":""}`})]}),o.brand&&e.jsxs("div",{className:"mt-2 space-y-2",children:[g.map(r=>e.jsxs("div",{className:"filters_text",children:[e.jsx("input",{type:"radio",className:"option-input radio ml-2",name:"brand",value:a(r),checked:n===a(r),onChange:()=>i(a(r))}),e.jsx("label",{className:"mb-0 mr-2 capitalize",children:r})]},r)),e.jsxs("div",{className:"filters_text",children:[e.jsx("input",{type:"radio",className:"option-input radio ml-2",name:"brand",value:"",checked:!n,onChange:()=>i("")}),e.jsx("label",{className:"mb-0 mr-2",children:"Alle brands"})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"header__dropdown flex justify-between items-center cursor-pointer",onClick:()=>h("color"),children:[e.jsx("h3",{children:"Color"}),e.jsx(f,{className:`text-5xl transition-transform dropdown__icon ${o.color?"rotate-180":""}`})]}),o.color&&e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsxs("div",{className:"flex flex-row-reverse items-center justify-between gap-2",children:[e.jsx("input",{type:"radio",className:"option-input radio ml-2",name:"color"}),e.jsxs("label",{className:"mb-0 mr-2 flex items-center justify-between",children:[e.jsx(j,{className:"text-white text-3xl"}),"White"]})]}),e.jsxs("div",{className:"flex flex-row-reverse items-center justify-between gap-2",children:[e.jsx("input",{type:"radio",className:"option-input radio ml-2",name:"color"}),e.jsxs("label",{className:"mb-0 mr-2",children:[e.jsx(j,{className:"text-black text-3xl"}),"Black"]})]}),e.jsxs("div",{className:"flex flex-row-reverse items-center justify-between gap-2",children:[e.jsx("input",{type:"radio",className:"option-input radio ml-2"}),e.jsxs("label",{className:"mb-0 mr-2",children:[e.jsx(j,{className:"text-gray-500 text-3xl"}),"Grey"]})]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"header__dropdown flex justify-between items-center cursor-pointer",onClick:()=>h("price"),children:[e.jsx("h3",{children:"Price"}),e.jsx(f,{className:`text-5xl transition-transform dropdown__icon ${o.price?"rotate-180":""}`})]})})]})}function D(){const[n,i]=l.useState([]),[o,m]=l.useState(!0),[h,g]=l.useState(null);l.useRef(null);const{brand:a}=_(),r=L(),c=S(),d=new URLSearchParams(c.search).get("category");l.useEffect(()=>{m(!0),fetch("http://localhost:4000/products").then(t=>t.json()).then(t=>{t.results?i(t.results):Array.isArray(t)?i(t):console.error("Unknown data format:",t)}).catch(t=>{console.error("Error fetching products:",t)}).finally(()=>{m(!1)})},[]);const y=t=>t==null?void 0:t.toLowerCase().trim(),N=t=>t==null?void 0:t.toLowerCase().replace(/\s+/g,"-").trim(),w=o?[]:n.filter(t=>{const s=a?y(t.brand)===y(a):!0,u=d?N(t.category)===N(d):!0;return s&&u}),v=t=>{const s=t?`/shop/${t.toLowerCase()}${c.search}`:`/shop${c.search}`;r(s)},C=t=>{let s="/shop";a&&(s+=`/${a}`);const u=t?`?category=${t}`:"";r(`${s}${u}`)},k=t=>{try{const s=JSON.parse(localStorage.getItem("cart"))||[];if(s.find(x=>x.id===t.id)){const x=s.map(p=>p.id===t.id?{...p,quantity:p.quantity+1}:p);localStorage.setItem("cart",JSON.stringify(x))}else{const x=[...s,{...t,quantity:1}];localStorage.setItem("cart",JSON.stringify(x))}alert(`${t.product_name} has been added to the cart.`),window.dispatchEvent(new Event("cartUpdated"))}catch(s){console.error("Error saving to cart:",s)}};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"uppercase text-2xl font-bold mb-4",children:"Products"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(A,{selectedBrand:a,onBrandChange:v,selectedCategory:d,onCategoryChange:C}),e.jsx("section",{className:"w-4/5 p-4 grid grid-cols-3 gap-4",children:o?e.jsx("p",{children:"Loading products..."}):w.length===0?e.jsxs("p",{children:["No products found",d&&` in category: ${d}`,a&&` for brand: ${a}`]}):w.map((t,s)=>e.jsxs("div",{className:"bg-white p-4 rounded shadow flex flex-col items-center justify-between",children:[e.jsxs("h3",{className:"mr-2 flex",children:["Compare ",e.jsx(P,{})]}),e.jsx($,{to:`/shop/product/${t.id}`,children:e.jsx("img",{src:t.image_url||E,alt:t.product_name,className:"my-2"})}),e.jsx("h3",{className:"text-center",children:t.product_name}),e.jsxs("p",{className:"font-bold mt-2",children:[t.price_dkk," DKK"]}),e.jsxs("div",{className:"flex items-center justify-between gap-4 mt-2 w-full",children:[e.jsx("button",{className:"product__bttn bg-orange-600 text-white px-4 py-2 rounded shadow hover:bg-orange-700",onClick:()=>k(t),children:"Add to cart"}),e.jsxs("p",{className:"flex items-center",children:[t.stock||"In stock",e.jsx("span",{className:`ml-1 text-xl ${t.stock==="Out of stock"?"text-red-600":t.stock==="Few in stock"?"text-orange-500":"text-green-600"}`,children:e.jsx(j,{})})]})]})]},s))})]})]})}export{D as default};
