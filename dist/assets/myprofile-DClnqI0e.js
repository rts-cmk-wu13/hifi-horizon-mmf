import{r as l,j as e,b as w,c as z,S as I}from"./index-9Ohd0KFn.js";import{P as T}from"./ProfileTabs-BEGTHEro.js";import W from"./Modify-PZpyDBfz.js";function f({onClick:n,label:a}){const[c,x]=l.useState(!1);return e.jsx("button",{onClick:n,style:{padding:"10px 20px",fontSize:"0.9em",borderRadius:"4px",border:"none",background:c?"#ff6a08":"#f5f5f5",cursor:"pointer",boxShadow:"0 0 10px rgba(0,0,0,0.1)",color:c?"#fff":"#ff6a08",transition:"background 0.2s, color 0.2s",marginRight:"1em"},onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),"aria-label":a||"Modify",title:a||"Modify",children:e.jsx("i",{className:"fa-solid fa-pen"})})}const N={genralDiv:{display:"flex",flexDirection:"column",backgroundColor:"#fff",borderRadius:"8px",width:"78%",marginBottom:"2rem",maxWidth:600,margin:"2rem auto",border:"1px solid #eee",boxShadow:"0 4px 24px #0001",padding:"2em"}};function F(){const[n,a]=l.useState(null),[c,x]=l.useState(""),[g,v]=l.useState(null),[p,r]=l.useState(null),[s,o]=l.useState(""),[t,d]=l.useState(""),[y,C]=l.useState(()=>{const i=localStorage.getItem("user");return i?JSON.parse(i):null}),h=y?y.email:null,S=w();z(),l.useEffect(()=>{h&&fetch(`http://localhost:3000/api/profile?email=${encodeURIComponent(h)}`).then(i=>{if(!i.ok)throw new Error("User not found");return i.json()}).then(i=>a(i)).catch(i=>x(i.message))},[h]);const R=()=>{localStorage.removeItem("user"),C(null),S("/login")},u=async(i,j)=>{let m;i==="address"?m={email:n.email,...s}:m={email:n.email,[j]:s};const b=await fetch("/api/profile",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)}),k=await b.json();b.ok?(d("Updated!"),r(null),a({...n,[j]:s})):d(k.message||"Failed to update.")};return c?e.jsx("div",{children:c}):n?e.jsx(T,{children:e.jsxs("div",{style:N.genralDiv,children:[e.jsxs("div",{style:{marginBottom:"2em",display:"flex",flexDirection:"column",alignItems:"stretch",gap:"0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"1em "},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("i",{className:"fa-solid fa-user profile-icon",style:{fontSize:"2.5rem",marginRight:"20px",color:"#ffcaa7"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:"1.1em"},children:"Name:"}),e.jsx("div",{children:n.fullname}),p==="name"&&e.jsxs("div",{style:{marginTop:8},children:[e.jsx("input",{value:s,onChange:i=>o(i.target.value),style:{padding:8,borderRadius:4,border:"1px solid #ccc"}}),e.jsx("button",{onClick:()=>u("name","fullname"),style:{color:"orange",padding:"1em",border:"none",borderRadius:"4px",background:"#fff",fontWeight:600,marginRight:"0.5em",cursor:"pointer"},children:"Save"}),e.jsx("button",{onClick:()=>r(null),children:"Cancel"}),t&&e.jsx("div",{children:t})]})]})]}),e.jsx(f,{onClick:()=>{r("name"),o(n.fullname),d("")}})]}),e.jsx("hr",{style:{width:"100%",border:"none",borderTop:"1px solid #eee",margin:0}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"1em "},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("i",{className:"fa-solid fa-phone profile-icon",style:{fontSize:"2.5rem",marginRight:"20px",color:"#ffcaa7"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:"1.1em"},children:"Phone number:"}),e.jsx("div",{children:n.phone||e.jsx("span",{style:{color:"#888"},children:"No phone number provided"})}),p==="phone"&&e.jsxs("div",{style:{marginTop:8},children:[e.jsx("input",{value:s,onChange:i=>o(i.target.value),style:{padding:8,borderRadius:4,border:"1px solid #ccc"}}),e.jsx("button",{onClick:()=>u("phone","phone"),style:{color:"orange",padding:"1em",border:"none",borderRadius:"4px",background:"#fff",fontWeight:600,marginRight:"0.5em",cursor:"pointer"},children:"Save"}),e.jsx("button",{onClick:()=>r(null),children:"Cancel"}),t&&e.jsx("div",{children:t})]})]})]}),e.jsx(f,{onClick:()=>{r("phone"),o(n.phone||""),d("")}})]}),e.jsx("hr",{style:{width:"100%",border:"none",borderTop:"1px solid #eee",margin:0}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"1em "},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("i",{className:"fa-solid fa-envelope profile-icon",style:{fontSize:"2.5rem",marginRight:"20px",color:"#ffcaa7"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:"1.1em"},children:"Email:"}),e.jsx("div",{children:n.email}),p==="email"&&e.jsxs("div",{style:{marginTop:8},children:[e.jsx("input",{value:s,onChange:i=>o(i.target.value),style:{padding:8,borderRadius:4,border:"1px solid #ccc"}}),e.jsx("button",{onClick:()=>u("email","email"),style:{color:"orange",padding:"1em",border:"none",borderRadius:"4px",background:"#fff",fontWeight:600,marginRight:"0.5em",cursor:"pointer"},children:"Save"}),e.jsx("button",{onClick:()=>r(null),children:"Cancel"}),t&&e.jsx("div",{children:t})]})]})]}),e.jsx(f,{onClick:()=>{r("email"),o(n.email),d("")}})]}),e.jsx("hr",{style:{width:"100%",border:"none",borderTop:"1px solid #eee",margin:0}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"1em "},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("i",{className:"fa-solid fa-location-dot profile-icon",style:{fontSize:"2.5rem",marginRight:"20px",color:"#ffcaa7"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:"1.1em"},children:"Address:"}),e.jsxs("div",{children:[n.address1,n.zipcode?` ${n.zipcode}`:"",e.jsx("br",{}),n.city?` ${n.city}`:"",e.jsx("br",{}),n.country?` ${n.country}`:""]}),p==="address"&&e.jsxs("div",{style:{marginTop:8,display:"flex",flexDirection:"column",gap:8},children:[e.jsx("input",{placeholder:"Address",value:s.address1,onChange:i=>o({...s,address1:i.target.value}),style:{padding:8,borderRadius:4,border:"1px solid #ccc"}}),e.jsx("input",{placeholder:"Zipcode",value:s.zipcode,onChange:i=>o({...s,zipcode:i.target.value}),style:{padding:8,borderRadius:4,border:"1px solid #ccc"}}),e.jsx("input",{placeholder:"City",value:s.city,onChange:i=>o({...s,city:i.target.value}),style:{padding:8,borderRadius:4,border:"1px solid #ccc"}}),e.jsx("input",{placeholder:"Country",value:s.country,onChange:i=>o({...s,country:i.target.value}),style:{padding:8,borderRadius:4,border:"1px solid #ccc"}}),e.jsx("button",{onClick:()=>u("address",null),style:{color:"orange",padding:"1em",border:"none",borderRadius:"4px",background:"#fff",fontWeight:600,marginRight:"0.5em",cursor:"pointer"},children:"Save"}),e.jsx("button",{onClick:()=>r(null),children:"Cancel"}),t&&e.jsx("div",{children:t})]})]})]}),e.jsx(f,{onClick:()=>{r("address"),o({address1:n.address1||"",zipcode:n.zipcode||"",city:n.city||"",country:n.country||""}),d("")}})]}),e.jsx("hr",{style:{width:"100%",border:"none",borderTop:"1px solid #eee",margin:0}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"1em "},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("i",{className:"fa-solid fa-key profile-icon",style:{fontSize:"2.5rem",marginRight:"20px",color:"#ffcaa7"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:"1.1em"},children:"Password:"}),e.jsx("div",{children:"********"}),p==="password"&&e.jsxs("div",{style:{marginTop:8},children:[e.jsx("input",{type:"password",value:s,onChange:i=>o(i.target.value),style:{padding:8,borderRadius:4,border:"1px solid #ccc"}}),e.jsx("button",{onClick:()=>u("password","password"),style:{color:"orange",padding:"1em",border:"none",borderRadius:"4px",background:"#fff",fontWeight:600,marginRight:"0.5em",cursor:"pointer"},children:"Save"}),e.jsx("button",{onClick:()=>r(null),children:"Cancel"}),t&&e.jsx("div",{children:t})]})]})]}),e.jsx(f,{onClick:()=>{r("password"),o(""),d("")}})]})]}),e.jsx("div",{style:{display:"flex",gap:"1em"},children:e.jsx("button",{onClick:R,style:{padding:"10px 20px",borderRadius:"4px",background:"#FF6900",color:"#fff",border:"none",fontWeight:600,fontSize:"1em",cursor:"pointer"},children:"Logout"})}),g&&e.jsx(W,{field:g.field,value:g.value,onClose:()=>v(null),email:n.email})]})}):e.jsx(I,{})}export{F as default};
